:root{
  --motion-fast: 160ms;
  --motion-med: 260ms;
  --motion-slow: 420ms;
  --easing-out: cubic-bezier(.22,.61,.36,1);
  --easing-in: cubic-bezier(.32,0,.67,.0);
}

html{ scroll-behavior: smooth; }

details.block {
  overflow: clip;
  transition: box-shadow var(--motion-fast) var(--easing-out), background var(--motion-fast) var(--easing-out);
}
details.block[open] { background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0)), var(--surface-2); }

details.block > summary {
  position: relative;
  transition: color var(--motion-fast) var(--easing-out);
}
details.block > summary::after{
  content: "";
  position: absolute; right: .1rem; top: 50%; translate: 0 -50%;
  width: 10px; height: 10px; border-right: 2px solid var(--muted); border-bottom: 2px solid var(--muted);
  rotate: -45deg; transition: rotate var(--motion-fast) var(--easing-out), border-color var(--motion-fast);
}
details.block[open] > summary::after{ rotate: 45deg; border-color: var(--text); }

details.block ._anim-collapsible{
  overflow: hidden;
  height: auto;
}

.rule-section{
  opacity: 0; transform: translateY(6px);
  transition: opacity var(--motion-med) var(--easing-out), transform var(--motion-med) var(--easing-out);
}
.rule-section._in{
  opacity: 1; transform: none;
}

:target { scroll-margin-top: 84px; }
:target h2 { text-shadow: 0 0 0 rgba(0,0,0,0); }
:target .section-head { box-shadow: inset 0 -1px 0 var(--border), 0 0 0 2px color-mix(in srgb, var(--accent-1) 25%, transparent); }

@media (prefers-reduced-motion: reduce){
  html { scroll-behavior: auto; }
  .rule-section, details.block, details.block ._anim-collapsible { transition: none !important; }
}